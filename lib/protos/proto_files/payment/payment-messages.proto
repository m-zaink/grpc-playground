syntax = "proto3";
package ae.falcon.payment.v1;
option java_package = "ae.falcon.payment.v1.messages";
import "common-messages.proto";


enum CardStatus {

  // If card is tokenized
  TOKENIZED = 0;

  // If card Is registered with some user.
  REGISTERED = 1;

  // If card is verified (penny drop is successful).
  VERIFIED = 2;

  // If card verification is failed.
  VERIFICATION_FAILED = 3;
}

message TokenizeCardRequest {

  // Card details
  CardDetails card_detail = 1;

  // Mandatory UUID4 id used to identify a session.
  // Send the same session token when user registers card.
  // OTP.
  string session_token = 2;
}


message CardDetails {

  // card number. should match (531465|533012)[0-9]{10}
  string card_number = 1;

  // card number. should match '[0-1]{1}[0-2]{1}'
  int32 card_expiry_month = 2;

  // card number. should match '[0-9]{2}'
  int32 card_expiry_year = 3;

  // card holder should be non black string.
  string card_holder_name = 4;
}


message TokenizeCardResponse {

  // card token generated by
  string card_token = 1;
}

message RegisterCardRequest {

  // card token received during tokenization
  string card_token = 1;

  // non blank uid.
  string user_uid = 2;

  // session token must be same as session_token sent for tokenization.
  string session_token = 3;
}

message CardStatusRequest {

  // user_uid non blank field.
  string user_uid = 1;
}

message CardStatusResponse {

  // valid card status.
  CardStatus card_status = 1;
}

message VerifyCardRequest {

  // user_uid non blank field.
  string user_uid = 1;
}

message VerifyCardResponse {

  // valid card status.
  CardStatus card_status = 1;
}

message UpdateCardRequest {

  // Card details
  CardDetails card_detail = 1;

  // user_uid non blank field.
  string user_uid = 2;
}

message UpdateCardResponse {

  // valid card status.
  CardStatus card_status = 1;
}

message FetchCardRequest {

  // user_uid non blank field.
  string user_uid = 1;
}

message FetchCardResponse {

  // Masked card number
  string masked_card_number = 1;

  // Card holder name provided during tokenization.
  string card_holder_name = 2;
}

